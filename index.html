<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Upload and Store Audio/Video in IndexedDB</title>
<script>
  // JavaScript code
  // Function to initialize IndexedDB
  function initDB() {
    let request = window.indexedDB.open('fileDB', 1);

    request.onerror = function(event) {
      console.log("Error opening database.");
    };

    request.onupgradeneeded = function(event) {
      let db = event.target.result;
      let objectStore = db.createObjectStore('files', { keyPath: 'id', autoIncrement:true });
      console.log("Database initialized.");
    };
  }

  // Function to handle file upload
  function handleFileUpload(event) {
    let files = event.target.files;
    let db = window.indexedDB.open('fileDB', 1);

    db.onsuccess = function(event) {
      let database = event.target.result;
      let transaction = database.transaction(['files'], 'readwrite');
      let objectStore = transaction.objectStore('files');

      for(let i = 0; i < files.length; i++) {
        let file = files[i];
        let fileEntry = { file: file };

        let addRequest = objectStore.add(fileEntry);
        addRequest.onsuccess = function(event) {
          console.log("File added to IndexedDB.");
        };
        addRequest.onerror = function(event) {
          console.log("Error adding file to IndexedDB.");
        };
      }
    };

    db.onerror = function(event) {
      console.log("Error opening database.");
    };
  }

  // Initialize IndexedDB when the document is ready
  document.addEventListener('DOMContentLoaded', function() {
    initDB();
  });

</script>
</head>
<body>
  <!-- HTML code -->
  <input type="file" id="fileInput" multiple onchange="handleFileUpload(event)">
</body>
</html>
